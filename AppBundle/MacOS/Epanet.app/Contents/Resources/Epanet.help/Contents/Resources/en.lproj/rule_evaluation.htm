<!DOCTYPE html>
<html>
<head>
   <title>Rule Evaluation</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="Rule-Based Controls,Rule-Based Controls Rule Evaluation" />
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />

   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

  <meta name="robots" content="index, anchors">
    
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#00FFFF">
  <tr valign="middle">
    <td align="left">
      <h1 class="p_Heading1"><span style="font-size: 12pt; font-weight: bold; color: #0000ff;">Rule Evaluation</span></h1>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="contents.htm">Top</a>&nbsp;
     <a href="rule_examples.htm">Previous</a>&nbsp;
     <a href="adding_an_object.htm">Next</a>
     </span>
    </td>
  </tr>
</table>

<a name="rule_evaluation.htm"></a>
    
<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p class="p_Normal"><span style="font-weight: bold; color: #010100;"><a href="rule-based_controls.htm" class="topiclink">Rule-Based Controls</a></span><span style="color: #010100;"> are applied after an initial hydraulic state of the network is computed (i.e., after time zero). They are evaluated over the course of a hydraulic simulation as follows:</span></p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0.0521in 0 0 0.0104in;"><table cellpadding="0" cellspacing="0" style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:0.2396in"><span style="color: #010100;">1.</span></td><td style="border:none;padding:0"><span style="color: #010100;">The rules are evaluated at a sub-hydraulic time step equal to 1/10 of the normal hydraulic time step (e.g., if hydraulics are updated every hour, then rules are evaluated every 6 minutes).</span></td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0.0521in 0 0 0.0104in;"><table cellpadding="0" cellspacing="0" style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:0.2396in"><span style="color: #010100;">2.</span></td><td style="border:none;padding:0"><span style="color: #010100;">Over this sub-hydraulic time step, clock time is updated as are the water levels in storage tanks (based on the last set of pipe flows computed). </span></td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0.0521in 0 0 0.0104in;"><table cellpadding="0" cellspacing="0" style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:0.2396in"><span style="color: #010100;">3.</span></td><td style="border:none;padding:0"><span style="color: #010100;">If a rule&#39;s conditions are satisfied, then its actions are added to a list. If an action conflicts with one for the same link already on the list then the action from the rule with the higher priority stays on the list and the other is removed. If the priorities are the same then the original action stays on the list.</span></td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0.0521in 0 0 0.0104in;"><table cellpadding="0" cellspacing="0" style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:0.2396in"><span style="font-size: 3pt; color: #010100;"> </span><span style="color: #010100;">4.</span></td><td style="border:none;padding:0"><span style="color: #010100;">If the list is not empty, then the new actions are taken. If this causes the status of one or more links to change then a new hydraulic solution is computed.</span></td></tr></table></div><div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0.0521in 0 0 0.0104in;"><table cellpadding="0" cellspacing="0" style="border:none;border-spacing:0;padding:0;line-height: normal;"><tr style="vertical-align:baseline"><td style="border:none;padding:0;width:0.2396in"><span style="color: #010100;">5.</span></td><td style="border:none;padding:0"><span style="color: #010100;">The action list is cleared and the next sub-hydraulic time step is checked.</span></td></tr></table></div>
</td></tr></table>

</body>
</html>
